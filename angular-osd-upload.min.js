!function(){angular.module("osdUpload",["ngFileUpload"])}(),function(){"use strict";function e(){var e=this,o={uploadUrl:"/api/v1/uploads",maxSize:1e8,supportedFileTypes:["png","pdf","jpeg","jpg","mp4"]};return e.config=function(t){return o=t,e},e.$get=function(){return o},e}angular.module("osdUpload");angular.module("osdUpload").provider("UploadConfig",e)}(),function(){angular.module("osdUpload").constant("UPLOAD",{ERROR:{FILE_TYPE:0,SIZE:1}})}(),function(){function e(e,o,t){o.onFileSelect=function(n){t.post(n[0],data).then(function(t){e.$emit("osdUploadSuccess",t),o.progress=0},function(t){e.$emit("osdUploadError",t),o.progress=0},function(e){o.progress=parseInt(100*e.loaded/e.total)})},e.$on("osdUploadSizeExceeded",function(){o.maxSizeExceeded=!0})}function o(){return{restrict:"E",replace:!0,scope:{data:"="},templateUrl:"/templates/image-upload.html",controller:"ImageUploadCtrl"}}e.$inject=["$rootScope","$scope","Upload"],angular.module("osdUpload").controller("ImageUploadCtrl",e).directive("imageUpload",o)}(),function(){function e(e,o,t,n){function r(e){return e.size>t.maxSize}function a(e,o){var n=o?o.join("|"):t.supportedFileTypes.join("|"),r=new RegExp(n,"g");return r.test(e.type)}var i=this;return i.post=function(i,l,p){var d=e.defer();if(r(i))return d.reject({type:n.ERROR.SIZE,message:"File size exceeded."}),d.promise;if(!a(i,p))return d.reject({type:n.ERROR.FILE_TYPE,message:"File type not supported."}),d.promise;var u={url:t.uploadUrl,file:i,data:l,fileName:"file"};return o.upload(u).progress(function(e){d.notify(e)}).success(function(e){d.resolve(e)}).error(function(e){d.reject(e)}),d.promise},i}e.$inject=["$q","Upload","UploadConfig","UPLOAD"],angular.module("osdUpload").factory("OsdUpload",e)}();